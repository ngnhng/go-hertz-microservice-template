# layout.yaml
layouts:
  # project main.go file
  - path: main.go
    delims:
      - "{{"
      - "}}"
    body: |-
      package main

      import (
        "{{.GoModule}}/cmd"
      )

      func main() {
      	cmd.Execute()
      }

  - path: cmd/root.go
    delims:
      - ""
      - ""
    body: |-
      // Code generated by hertz generator.

      package cmd

      import (
        "github.com/spf13/cobra"
        "github.com/spf13/viper" 
      )

      func Execute() {
        viper.SetDefault("version", Version)
      	rootCmd := &cobra.Command{
      		Use:   "app",
      		Short: "app is a microservice application",
      	}

      	rootCmd.AddCommand(versionCmd)
      	rootCmd.AddCommand(apiCmd)

      	if err := rootCmd.Execute(); err != nil {
      		panic(err)
      	}
      }

  - path: cmd/version.go
    delims:
      - ""
      - ""
    body: |-
      // Code generated by hertz generator.

      package cmd

      import (
      	"fmt"
      	"github.com/spf13/cobra"
      )

      var (
        Version   = "develop"
        BuildDate = "-"
        Commit    = "-"
      )

      var versionCmd = &cobra.Command{
      	Use:   "version",
      	Short: "Print the version number of app",
      	Run: func(cmd *cobra.Command, args []string) {
      		fmt.Printf("Version: %s\n", Version)
      		fmt.Printf("Build Date: %s\n", BuildDate)
      		fmt.Printf("Commit: %s\n", Commit)
      	},
      }

  - path: cmd/api.go
    delims:
      - ""
      - ""
    body: |-
      // Code generated by hertz generator.

      package cmd

      import (
        "github.com/cloudwego/hertz/pkg/app/server"
        "github.com/spf13/cobra"
        "github.com/template/hello/core/router"
      )

      var apiCmd = &cobra.Command{
        Use:   "serve",
        Short: "Start the server",
        Run: func(cmd *cobra.Command, args []string) {
          s := server.Default()
          router.GeneratedRegister(s)
          s.Spin()
        },
      }

  # go.mod file, requires template rendering data {{.GoModule}} to generate
  - path: go.mod
    delims:
      - "{{"
      - "}}"
    body: |-
      module {{.GoModule}}
      {{- if .UseApacheThrift}}
      replace github.com/apache/thrift => github.com/apache/thrift v0.13.0
      {{- end}}

  - path: .gitignore
    delims:
      - ""
      - ""
    body: |-
      # Code generated by hertz generator.
      .DS_Store
      .env
      .env.local
      .env.test
      .env.prod
      .env.local.prod
      .env.local.test
      .env.local.dev

      *.o
      *.a
      *.so

      .cache
      .cache.local

      .log
      .log.local

      .tmp
      .tmp.local

      .bak
      .bak.local

      .history
      .history.local

      .backup

      .data
